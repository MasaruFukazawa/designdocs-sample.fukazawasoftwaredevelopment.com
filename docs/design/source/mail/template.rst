[ メールタイトル ]
==============================================

メール概要
--------------------------------------------

**目的**: [ メールの目的（例：ユーザー確認、手続き完了通知、エラー通知） ]

**送信タイミング**: [ 送信タイミング（例：登録完了直後、毎月1日、エラー発生時） ]

**重要度**: [ 重要度（例：高、中、低） ]

**想定受信者**: [ 対象ユーザー（例：新規登録者、既存会員、管理者） ]

送信条件・トリガー
--------------------------------------------

**送信条件**: 

- [ 条件1（例：ドメインイベント「○○○」が発生した時） ]
- [ 条件2（例：特定のステータスに変更された時） ]
- [ 条件3（例：バッチ処理で定期実行する時） ]

**トリガー**: [ 具体的なトリガー（例：MemberRegisteredドメインイベント） ]

**送信タイミング詳細**:

- [ 詳細タイミング（例：イベント発生から1分以内に送信） ]
- [ リトライ仕様（例：失敗時は5分間隔で3回まで再送） ]
- [ 制限事項（例：1日あたり同一ユーザーへの送信は5回まで） ]

送信者情報
--------------------------------------------

**送信者名**: [ 送信者名（例：ECサイト運営事務局） ]

**送信元メールアドレス**: [ 送信元アドレス（例：noreply@example.com） ]

**返信先メールアドレス**: [ 返信先アドレス（例：support@example.com） ]

**送信元設定**:

- [ 送信サーバー設定（例：SMTP設定、認証情報） ]
- [ SPF/DKIM設定の要否（例：ドメイン認証設定済み） ]

受信者情報
--------------------------------------------

**宛先**: [ 宛先取得方法（例：登録されたメールアドレス） ]

**宛先決定ロジック**: [ 宛先の決定方法（例：集約のEmailAddressプロパティ） ]

**CC/BCC**: [ CC/BCCの有無と設定（例：管理者にBCCを送信） ]

件名
--------------------------------------------

**件名テンプレート**: [ 件名（例：【ECサイト】会員登録が完了しました） ]

**件名変数**: 

- [ 変数名1 ]: [ 説明（例：サイト名、動的に変更される部分） ]
- [ 変数名2 ]: [ 説明（例：ユーザー名、パーソナライズ要素） ]

**件名例**: [ 実際の例（例：【ECサイト】会員登録が完了しました - 田中様） ]

メール本文（HTML版）
--------------------------------------------

.. code-block:: html

   <!DOCTYPE html>
   <html lang="ja">
   <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>[ メールタイトル ]</title>
       <style>
           /* CSSスタイル */
           body { font-family: 'ヒラギノ角ゴシック', sans-serif; }
           .container { max-width: 600px; margin: 0 auto; }
           .header { background-color: #f8f9fa; padding: 20px; }
           .content { padding: 20px; }
           .footer { background-color: #e9ecef; padding: 15px; font-size: 12px; }
           .button { background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; }
       </style>
   </head>
   <body>
       <div class="container">
           <div class="header">
               <h1>[ サイト名・サービス名 ]</h1>
           </div>
           
           <div class="content">
               <p>{{ member_name }}様</p>
               
               <p>[ 挨拶メッセージ（例：このたびは会員登録いただき、ありがとうございます。） ]</p>
               
               <p>[ 主要メッセージ（例：会員登録が正常に完了いたしました。） ]</p>
               
               <h2>[ セクション見出し（例：登録内容） ]</h2>
               <ul>
                   <li>メールアドレス: {{ email_address }}</li>
                   <li>登録日: {{ registration_date }}</li>
                   <li>[ その他の情報項目 ]</li>
               </ul>
               
               <h2>[ アクション見出し（例：次のステップ） ]</h2>
               <p>[ アクション説明（例：以下のボタンからログインして、サービスをご利用ください。） ]</p>
               
               <p>
                   <a href="{{ site_url }}/login" class="button">[ アクションボタン（例：ログインする） ]</a>
               </p>
               
               <h2>[ 注意事項見出し（例：重要なお知らせ） ]</h2>
               <p>[ 注意事項（例：パスワードは第三者に知られないよう厳重に管理してください。） ]</p>
               
               <p>[ 問い合わせ案内（例：ご不明な点がございましたら、下記までお問い合わせください。） ]</p>
           </div>
           
           <div class="footer">
               <p>[ フッター情報（例：このメールは送信専用です。返信できません。） ]</p>
               <p>[ 会社情報（例：株式会社○○○ 〒XXX-XXXX 東京都○○区○○） ]</p>
               <p>[ 配信停止リンク（例：配信停止はこちら: {{ unsubscribe_url }} ） ]</p>
           </div>
       </div>
   </body>
   </html>

メール本文（テキスト版）
--------------------------------------------

::

   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   [ サイト名・サービス名 ]
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   {{ member_name }}様
   
   [ 挨拶メッセージ（例：このたびは会員登録いただき、ありがとうございます。） ]
   
   [ 主要メッセージ（例：会員登録が正常に完了いたしました。） ]
   
   ■[ セクション見出し（例：登録内容） ]
   ・メールアドレス: {{ email_address }}
   ・登録日: {{ registration_date }}
   ・[ その他の情報項目 ]
   
   ■[ アクション見出し（例：次のステップ） ]
   [ アクション説明（例：以下のURLからログインして、サービスをご利用ください。） ]
   
   ログインURL: {{ site_url }}/login
   
   ■[ 注意事項見出し（例：重要なお知らせ） ]
   [ 注意事項（例：パスワードは第三者に知られないよう厳重に管理してください。） ]
   
   [ 問い合わせ案内（例：ご不明な点がございましたら、下記までお問い合わせください。） ]
   
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   [ 問い合わせ先情報 ]
   問い合わせURL: {{ support_url }}
   電話: [ 電話番号 ]
   受付時間: [ 受付時間 ]
   
   [ フッター情報（例：このメールは送信専用です。返信できません。） ]
   [ 会社情報（例：株式会社○○○ 〒XXX-XXXX 東京都○○区○○） ]
   配信停止: {{ unsubscribe_url }}
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━

変数一覧
--------------------------------------------

.. list-table::
   :header-rows: 1

   * - 変数名
     - データ型
     - 説明
     - 必須/任意
     - デフォルト値
   * - {{ member_name }}
     - String
     - [ 変数説明（例：会員名（姓+名）） ]
     - 必須
     - [ デフォルト値（例：「お客様」） ]
   * - {{ email_address }}
     - String
     - [ 変数説明（例：登録されたメールアドレス） ]
     - 必須
     - なし
   * - {{ registration_date }}
     - Date
     - [ 変数説明（例：登録完了日時（YYYY年MM月DD日形式）） ]
     - 必須
     - なし
   * - {{ site_url }}
     - URL
     - [ 変数説明（例：サイトのベースURL） ]
     - 必須
     - [ デフォルトURL ]
   * - {{ support_url }}
     - URL
     - [ 変数説明（例：問い合わせページURL） ]
     - 任意
     - [ デフォルトサポートURL ]
   * - {{ unsubscribe_url }}
     - URL
     - [ 変数説明（例：配信停止URL） ]
     - 任意
     - [ デフォルト配信停止URL ]

エラーハンドリング
--------------------------------------------

**送信失敗時の処理**:

- [ 失敗パターン1（例：メールアドレスが無効な場合） ]: [ 処理内容 ]
- [ 失敗パターン2（例：送信サーバーエラーの場合） ]: [ 処理内容 ]
- [ 失敗パターン3（例：変数不足の場合） ]: [ 処理内容 ]

**再送ポリシー**:

- [ 再送条件（例：一時的エラーの場合のみ再送） ]
- [ 再送間隔（例：5分、15分、60分間隔で最大3回） ]
- [ 再送上限（例：合計3回まで再送試行） ]

**ログ出力**:

- [ 成功ログ（例：送信成功時はINFOレベルでログ出力） ]
- [ 失敗ログ（例：送信失敗時はERRORレベルでログ出力） ]
- [ 監視項目（例：失敗率が10%を超えた場合にアラート） ]

テスト項目
--------------------------------------------

**機能テスト**:

- [ テスト項目1（例：正常な変数値でメール送信が成功する） ]
- [ テスト項目2（例：必須変数が不足している場合にエラーとなる） ]
- [ テスト項目3（例：無効なメールアドレスの場合に適切にエラーハンドリングされる） ]

**表示テスト**:

- [ 表示テスト1（例：HTML版が各主要ブラウザで正常に表示される） ]
- [ 表示テスト2（例：テキスト版が文字化けせずに表示される） ]
- [ 表示テスト3（例：モバイル端末でのレスポンシブ表示が正常である） ]

**セキュリティテスト**:

- [ セキュリティテスト1（例：XSS攻撃に対する変数のエスケープ処理） ]
- [ セキュリティテスト2（例：機密情報の不正な露出がない） ]
- [ セキュリティテスト3（例：SPF/DKIM設定によるなりすまし防止） ]

運用考慮事項
--------------------------------------------

**配信統計・分析**:

- [ 統計項目1（例：送信成功率の監視と記録） ]
- [ 統計項目2（例：開封率・クリック率の計測（可能な場合）） ]
- [ 統計項目3（例：バウンス率の監視とアドレス無効化） ]

**メンテナンス**:

- [ メンテナンス1（例：テンプレートの定期的な見直し） ]
- [ メンテナンス2（例：法的要件変更時の対応手順） ]
- [ メンテナンス3（例：デザイン更新時の影響範囲確認） ]

**個人情報保護**:

- [ 保護項目1（例：メール送信ログの保存期間は1年間） ]
- [ 保護項目2（例：退会時のメールアドレス削除手順） ]
- [ 保護項目3（例：第三者への情報開示禁止の徹底） ]

**法的要件**:

- [ 法的要件1（例：特定電子メール法への準拠） ]
- [ 法的要件2（例：配信停止機能の提供義務） ]
- [ 法的要件3（例：個人情報保護法への準拠確認） ]
  